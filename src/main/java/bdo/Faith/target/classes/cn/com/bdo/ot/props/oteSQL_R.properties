#############################ongoing trannig begin #############################
#spl=##\##
#\u67E5\u8BE2\u6240\u6709\u6709\u8BC1\u4E66\u7684\u7528\u6237
UC000001=SELECT distinct b.hrLoginId AS focusLoginId,b.name AS focusName,d.departname AS departName,b.userPhoto FROM asdb.k_sacpcertificate a LEFT JOIN bdo_base.base_user b ON b.id = a.userId LEFT JOIN bdo_base.base_department d ON d.autoid = b.departmentid WHERE b.id != 19 AND b.wrokState = '\u5728\u804C' AND b.hrLoginId > '' AND b.ACTIVE_FLAG = 1 AND a.certificateDate >= NOW() AND a.ACTIVE_FLAG = 1 /*START #param1# AND b.name LIKE '%{param1}%' #param1# END*/
##\u914D\u7F6E\u4FE1\u606F
OT00001=SELECT rule.autoId, rule.score, rule.proportion, rule.nodeType, rule.nodeName, rule.nodeRop, rule.oteVersion, rule.CREATION_DATE FROM asdb.ot_scorecalcrule rule WHERE rule.ACTIVE_FLAG = '1' /*START #param1# AND rule.oteVersion = '{param1}' #param1# END*/ /*START #param2# AND rule.CREATION_DATE = (SELECT MAX(CREATION_DATE) AS maxCreationDate FROM asdb.ot_scorecalcrule) #param2# END*/
##\u914D\u7F6E\u4FE1\u606F\u4E00\u89C8
OT00002=SELECT rule.autoId, rule.score, rule.proportion, rule.nodeType, rule.nodeName, rule.nodeRop, rule.oteVersion, rule.CREATION_DATE FROM asdb.ot_scorecalcrule rule WHERE 1 = 1 /*START #param1# AND rule.oteVersion = '{param1}' #param1# END*/ /*START #param2# AND rule.CREATION_DATE = (SELECT MAX(CREATION_DATE) AS maxCreationDate FROM asdb.ot_scorecalcrule) #param2# END*/
##\u5F53\u524D\u673A\u8003\u914D\u7F6E\u7248\u672C
OT00003=SELECT MAX(oteVersion) AS oteVersion FROM asdb.ot_scorecalcrule rule WHERE rule.ACTIVE_FLAG = '1'
##\u7528\u6237\u8003\u8BD5\u4E00\u89C8
OT00004=SELECT otp.autoId, otp.userId, otp.oteLevel, otp.preOteId, otp.projectId, otp.customerId, otp.weId, concat(otp.projectId, '-', otp.projectName) as projectName, CONCAT(otp.customerId, '-', otp.customerName) AS customerName, otp.startDate, otp.endDate, otp.rop, otp.score, otp.weScore, otp.oteScore, otp.isWePassed, otp.isOtePassed, otp.isQualified, otp.isCerGenerated, otp.wePassScore, otp.otePassScore, ots.isExpired FROM asdb.ot_project otp left join bdo_dg.dg_project dgp on dgp.projectId = otp.projectId and dgp.customerId = otp.customerId left join ot_sacpcertificate ots on ots.projectId = otp.projectId and ots.customerId = otp.customerId and ots.userId = otp.userId and ots.endPointType = 'SERVER'  WHERE otp.userId = {userId} ORDER BY otp.autoId DESC
##\u914D\u7F6E\u5217\u8868
OT00005=SELECT rule.oteVersion, Max(rule.CREATION_DATE) AS createDate, Max(rule.LAST_UPDATE_DATE) AS updateDate, rule.ACTIVE_FLAG AS isActive FROM asdb.ot_scorecalcrule rule GROUP BY rule.oteVersion ORDER BY rule.autoId DESC
##
OT00006=SELECT count(rule.autoId) as cnt FROM asdb.ot_scorecalcrule rule WHERE rule.ACTIVE_FLAG = '1' AND rule.oteVersion = '{param1}'
##\u5F53\u524D\u8003\u8BD5\u7684\u9879\u76EE
OT00007=SELECT * FROM asdb.ot_project otp WHERE otp.ACTIVE_FLAG = '1' AND otp.userId = {userId} AND otp.isCerGenerated <> '1' ORDER BY autoId DESC LIMIT 0, 1
##\u6700\u65B0\u52A8\u6001\u663E\u793A\u83B7\u53D6\u6700\u8FD1\u83B7\u5F97\u57F9\u8BAD\u8BC1\u4E66\u7684\u4EBA
OT00008=select distinct CONCAT(t1.activeDate,'-',t2.hrDeptCode018,'-',t2.hrDeptCode019,'-',t2.hrDepart,'-',t2.name,case when t1.oteLevel = 100 then ' \u901A\u8FC7\u57FA\u7840\u7248\u8003\u8BD5' when t1.oteLevel = 200 then ' \u901A\u8FC7\u8FDB\u9636\u7248\u8003\u8BD5' end) as message from (select t1.userId,max(t1.activeDate) as activeDate,t1.oteLevel from asdb.ot_sacpcertificate t1 where t1.ACTIVE_FLAG = 1 and t1.expiredDate >= NOW() and t1.expiredDate <=  DATE_ADD(NOW(), INTERVAL 1 YEAR) group by t1.userId,t1.oteLevel) t1,bdo_base.base_user t2 where t1.userId = t2.id order by t1.activeDate desc 
##\u67E5\u8BE2\u62E5\u6709\u514D\u8003\u89D2\u8272\u7684\u975E\u5728\u804C\u6743\u76CA\u5408\u4F19\u4EBA\uFF0C\u6388\u85AA\u5408\u4F19\u4EBA
OT00009=select r.userid,r.rid,r.property from bdo_base.base_userrole r left join bdo_base.base_user u on r.userid = u.id and u.rank REGEXP '[\u6388\u85AA|\u6743\u76CA]\u5408\u4F19\u4EBA' and u.isActive = 1 where r.rid = {param1} and u.id is null
##\u67E5\u8BE2\u6CA1\u6709\u514D\u8003\u89D2\u8272\u7684\u5728\u804C\u6743\u76CA\u5408\u4F19\u4EBA\uFF0C\u6388\u85AA\u5408\u4F19\u4EBA
OT00010=select u.id as userid,{param1} as rid from bdo_base.base_user u left join bdo_base.base_userrole r on r.userid = u.id and r.rid = {param1} where u.rank REGEXP '[\u6388\u85AA|\u6743\u76CA]\u5408\u4F19\u4EBA' and u.isActive = 1 and r.userid is null
##\u67E5\u8BE2\u6709\u8BC1\u4E66\u7684\u7528\u6237
OT00011=SELECT DISTINCT b.hrLoginId AS focusLoginId,b.name AS focusName,d.departname AS departName,b.userPhoto FROM asdb.ot_sacpcertificate a LEFT JOIN bdo_base.base_user b ON b.id = a.userId LEFT JOIN bdo_base.base_department d ON d.autoid = b.departmentid WHERE b.id != 19 AND b.wrokState = '\u5728\u804C' AND b.hrLoginId > '' AND b.ACTIVE_FLAG = 1 AND a.expiredDate >= NOW() and a.isActive = 1 and a.endPointType = 'SERVER' and a.isExpired = 0 and a.ACTIVE_FLAG = 1 /*START #param1# AND b.name LIKE '%{param1}%' #param1# END*/
##\u8FC7\u671F\u8BC1\u4E66
OT00012=SELECT * FROM asdb.ot_sacpcertificate scer WHERE scer.expiredDate < now() and scer.isExpired <> 1
##\u91CD\u5237\u8BC1\u4E66
OT00013=SELECT * FROM asdb.ot_sacpcertificate scer WHERE scer.fileName = '' and scer.endPointType = 'SERVER' order by scer.autoId
##\u91CD\u5237\u8BC1\u4E66
OT00014=SELECT * FROM asdb.k_sacpcertificate scer WHERE scer.certificatePath = '' order by scer.autoId
##\u8FC7\u671F\u8BC1\u4E66
OT00015=SELECT * FROM asdb.k_sacpcertificate scer WHERE scer.certificateDate < now()
#############################ongoing trannig end #############################