import{_ as te}from"./itemTitle.c6356fca.js";import{e as D}from"./eventbus.38817e84.js";import{d as E,h as t,j as F,r as k,o as S,b as T,i as l,w as U,z as Y,x as Q,y as V,t as H,D as N,s as ae,u as se,F as oe,v as le,G,n as q}from"./vendor.7005e464.js";const ne=[{title:"\u6587\u4EF6\u7C7B\u578B",dataIndex:"fileType",key:"fileType"},{title:"\u6587\u4EF6\u540D\u79F0",dataIndex:"fileName",key:"fileName"},{title:"\u53D1\u51FD\u65E5\u671F",dataIndex:"letterDate",key:"letterDate"},{title:"\u64CD\u4F5C",dataIndex:"action",key:"action",slots:{customRender:"action"}}];var z=E({components:{},setup(e,{attrs:b,slots:y,emit:L}){const{ctx:p,proxy:a}=F();t([]);const n=t([]),r=t(0),u=t({pageSize:5,defaultCurrent:1,showQuickJumper:!0,hideOnSinglePage:!1,showSizeChanger:!0,pageSizeOptions:["5","10","50","100"],total:0,showTotal:s=>`\u5171 ${s} \u6761`}),d=t(!1),M=t("\u9644\u4EF6\u5217\u8868"),v=t(!1);return{columns1:ne,data:n,pagination:u,visible:d,title1:M,spinning:v,show:s=>{v.value=!0,n.value=[],d.value=!0,a.$faithApi.getCusReguFileList({param1:s.letterId}).then(c=>{c.success&&Array.isArray(c.data)?(n.value=c.data,r.value=c.data.length,v.value=!1):(n.value=[],a.$toast.error(c.resultInfo.statusText),v.value=!1)}).catch(c=>{console.log(c)})},showDetaiInfoModel:s=>{window.open(s.fileUrl)},dataTotal:r}}});const j=N(),re=j((e,b)=>{const y=k("bdo-icon"),L=k("bdo-a-table"),p=k("bdo-a-spin"),a=k("bdo-a-modal");return S(),T("div",null,[l(a,{visible:e.visible,"onUpdate:visible":b[1]||(b[1]=n=>e.visible=n),width:"95%",title:e.title1,footer:!1},{default:j(()=>[l(p,{spinning:e.spinning},{default:j(()=>[e.visible?(S(),T(L,{key:0,pagination:!1,scroll:{y:350},columns:e.columns1,"data-source":e.data,rowKey:(n,r)=>r},{action:j(({record:n})=>[l(y,{class:"pointer",onClick:U(r=>e.showDetaiInfoModel(n),["stop"]),src:"EyeOutlined",title:"\u9884\u89C8"},null,8,["onClick"])]),_:1},8,["columns","data-source","rowKey"])):Y("",!0),Q(l("div",{class:"dataTotal"},"\u5171 "+H(e.dataTotal)+" \u6761",513),[[V,e.dataTotal!=0]])]),_:1},8,["spinning"])]),_:1},8,["visible","title"])])});z.render=re;z.__scopeId="data-v-4a0a852e";var J=E({components:{},setup(e,{attrs:b,slots:y,emit:L}){const{ctx:p,proxy:a}=F(),n=t(!1),r=t("\u67E5\u770B"),u=t(!1),d=t(""),M=t(""),v=t([]);return{visible:n,title1:r,spinning:u,show:_=>{u.value=!0,n.value=!0,a.$faithApi.getCusReguMsg({param1:_.letterId}).then(s=>{s.success&&Array.isArray(s.data)?(d.value=s.data[0].headerMsg.askMsg,v.value=s.data[0].contentMsg,M.value=s.data[0].footerMsg.askMsg,u.value=!1):(d.value="",M.value="",v.value=[],a.$toast.error(s.resultInfo.statusText),u.value=!1)}).catch(s=>{console.log(s)})},head:d,foot:M,content:v}}});const K=N();ae("data-v-7a2735ca");const ie={class:"main"},ue={class:"regulaModal"},ce={class:"label"},de=l("span",{class:"answer1"},"\u95EE\uFF1A",-1),ge=l("span",{class:"askMsg1"},"\u7B54\uFF1A",-1);se();const fe=K((e,b)=>{const y=k("bdo-a-spin"),L=k("bdo-a-modal");return S(),T("div",ie,[e.visible?(S(),T(L,{key:0,visible:e.visible,"onUpdate:visible":b[1]||(b[1]=p=>e.visible=p),width:"95%",title:e.title1,footer:!1},{default:K(()=>[l(y,{spinning:e.spinning},{default:K(()=>[l("div",ue,[l("p",{innerHTML:e.head},null,8,["innerHTML"]),(S(!0),T(oe,null,le(e.content,(p,a)=>(S(),T("ul",{key:a},[l("li",null,[l("p",ce,H(p.msgLabel),1),de,l("p",{class:"answer",innerHTML:p.answerMsg},null,8,["innerHTML"]),ge,l("p",{class:"askMsg",innerHTML:p.askMsg},null,8,["innerHTML"])])]))),128)),l("p",{innerHTML:e.foot},null,8,["innerHTML"])])]),_:1},8,["spinning"])]),_:1},8,["visible","title"])):Y("",!0)])});J.render=fe;J.__scopeId="data-v-7a2735ca";var P=E({components:{RegulatoryDetailModal:z,RegulatoryChecklModal:J},setup(e,{attrs:b,slots:y,emit:L}){const{ctx:p,proxy:a}=F(),r=t([{title:"\u7C7B\u578B",align:"left",dataIndex:"letterType",key:"letterType"},{title:"\u6807\u9898",align:"left",dataIndex:"letterName",key:"letterName"},{title:"\u6807\u7B7E",align:"left",dataIndex:"tagNames",key:"tagNames",width:"200px",ellipsis:!0,scopedSlots:{customRender:"tagNames"}},{title:"\u53D1\u51FD\u5355\u4F4D",align:"left",dataIndex:"letterOrg",key:"letterOrg",width:"130px"},{title:"\u53D1\u51FD\u65E5\u671F",width:"120px",align:"left",dataIndex:"letterDate",key:"letterDate"},{title:"\u56DE\u51FD\u65E5\u671F",width:"120px",align:"left",dataIndex:"returnDate",key:"returnDate"},{title:"\u64CD\u4F5C",dataIndex:"action",key:"action",slots:{customRender:"action"}}]),u=t([]),d=t(0),M=t({pageSize:5,defaultCurrent:1,showQuickJumper:!0,hideOnSinglePage:!1,showSizeChanger:!0,pageSizeOptions:["5","10","50","100"],total:0,showTotal:m=>`\u5171 ${m} \u6761`}),v=t(!0),I=m=>{a.$refs.RegulatoryDetailModal.show(m)},_=m=>{let C=sessionStorage.getItem("customerId"),o=m.letterId;a.$faithApi.getReguSys({}).then(i=>{if(i.success&&Array.isArray(i.data)){let h=i.data[0].addressUrl,w=i.data[0].loginId,R=i.data[0].systemName,x=i.data[0].token,A=i.data[0].redirectUrl,g=h+"?loginid="+w+"&systemid="+R+"&token="+x+"&redirectUrl="+A+"&customerId="+C+"&letterId="+o;window.open(g)}else a.$toast.error(i.resultInfo.statusText)})},s=m=>{a.$faithApi.getCusReguList(m).then(C=>{C.success&&Array.isArray(C.data)?(u.value=C.data,d.value=C.data.length):(a.$toast.error(C.resultInfo.statusText),u.value=[])})},c=()=>{let m=sessionStorage.getItem("customerId"),C=sessionStorage.getItem("projectId"),o=sessionStorage.getItem("projectYear"),h={lockCustomerId:m,lockProjectId:C,lockYyyy:o,menuId:"40000077"};a.$faithApi.getCusReguList(h).then(w=>{w.success&&Array.isArray(w.data)?(u.value=w.data,d.value=w.data.length):(a.$toast.error(w.resultInfo.statusText),u.value=[])}).catch(w=>{console.log(w)})};return G(()=>{D.on("reguLatory.getCusReguList1",c)}),q(()=>{D.off("reguLatory.getCusReguList1",c)}),{columns:r,data:u,dataTotal:d,pagination:M,visible:v,getCusReguList:s,getCusReguList1:c,showAttachments:I,showChecklModal:_}}});const W=N(),pe=W((e,b)=>{const y=k("bdo-icon"),L=k("bdo-a-table"),p=k("Regulatory-DetailModal"),a=k("Regulatory-ChecklModal");return S(),T("div",null,[l(L,{pagination:!1,columns:e.columns,"data-source":e.data,rowKey:(n,r)=>r},{action:W(({record:n})=>[l(y,{class:"pointer",onClick:U(r=>e.showChecklModal(n),["stop"]),src:"EyeOutlined",title:"\u67E5\u770B"},null,8,["onClick"]),l(y,{class:"pointer",onClick:U(r=>e.showAttachments(n),["stop"]),src:"FileOutlined",title:"\u9644\u4EF6"},null,8,["onClick"])]),_:1},8,["columns","data-source","rowKey"]),Q(l("div",{class:"dataTotal"},"\u5171 "+H(e.dataTotal)+" \u6761",513),[[V,e.dataTotal!=0]]),l(p,{ref:"RegulatoryDetailModal"},null,512),l(a,{ref:"RegulatoryChecklModal"},null,512)])});P.render=pe;P.__scopeId="data-v-8f401bfa";var X=E({components:{itemTitle:te,regulatoryList:P},setup(e,{attrs:b,slots:y,emit:L}){const{ctx:p,proxy:a}=F(),n=t([]),r=t([]),u=t([]),d=t([]),M=t(0),v=t(""),I=t([]),_=t([]),s=t([]),c=({typeCode:o,checked:i,type1:h})=>{if(o=="\u5168\u90E8"&&i===!0&&h===1&&(n.value.forEach(g=>{g.checked2==!0&&(g.checked2=!1)}),d.value.forEach(g=>{g.checked3==!0&&(g.checked3=!1)}),u.value.forEach(g=>{g.checked4==!0&&(g.checked4=!1)}),_.value=[],I.value=[],s.value=[],a.$refs.regulatory.getCusReguList1),i===!1&&h===1)return!1;let w=sessionStorage.getItem("customerId"),R=sessionStorage.getItem("projectId"),x=sessionStorage.getItem("projectYear"),A="40000077";if(o&&i===!0&&h!==1){i===!0&&h===2&&(r.value.forEach(f=>{f.checked1==!0&&(f.checked1=!1)}),_.value.push(o)),i===!0&&h===3&&(r.value.forEach(f=>{f.checked1==!0&&(f.checked1=!1)}),I.value.push(o)),i===!0&&h===4&&(r.value.forEach(f=>{f.checked1==!0&&(f.checked1=!1)}),s.value.push(o));let g=_.value.toString(),O=I.value.toString();const B={askLabel:s.value.toString(),letterOrg:g,letterType:O};a.$refs.regulatory.getCusReguList({lockCustomerId:w,lockProjectId:R,lockYyyy:x,menuId:A,jsonData:JSON.stringify(B)})}else{if(i===!1&&h===2){let f=_.value.findIndex($=>$==o);_.value.splice(f,1).toString()}if(i===!1&&h===3){let f=I.value.findIndex($=>$==o);I.value.splice(f,1).toString()}if(i===!1&&h===4){let f=s.value.findIndex($=>$==o);s.value.splice(f,1).toString()}let g=_.value.toString(),O=I.value.toString();const B={askLabel:s.value.toString(),letterOrg:g,letterType:O};a.$refs.regulatory.getCusReguList({lockCustomerId:w,lockProjectId:R,lockYyyy:x,menuId:A,jsonData:JSON.stringify(B)})}},m=({type1:o})=>{M.value=o,_.value=[],I.value=[],s.value=[],a.$refs.regulatory.getCusReguList1()};return G(()=>{D.on("reguLatory.regulMore",m),D.on("reguLatory.infoSwitch",c)}),q(()=>{D.off("reguLatory.regulMore",m),D.off("reguLatory.infoSwitch",c)}),{answerTag:u,getCusReguNum:()=>{a.$faithApi.getCusReguNum({}).then(o=>{o.success&&Array.isArray(o.data)?(M.value==1&&(n.value=o.data[0].letterOrgList,d.value=o.data[0].letterTypeList,u.value=o.data[0].askLabelList),v.value=o.data[0].totalList[0].typeNum,r.value=o.data[0].totalList):a.$toast.error(o.resultInfo.statusText)}).catch(o=>{console.log(o)})},allNum:v,entire:r,sendingUnit:n,correspondence:d,infoSwitch:c,sendingList:_,corresList:I,answerList:s,regulMore:m,kind1:M}}});const Z=N(),ve=Z((e,b)=>{const y=k("regulatory-List"),L=k("itemTitle");return S(),T("div",null,[l(L,{title:"",id:"regulatoryList"},{content:Z(()=>[l(y,{ref:"regulatory"},null,512)]),_:1})])});X.render=ve;X.__scopeId="data-v-0751d368";export{X as default};
