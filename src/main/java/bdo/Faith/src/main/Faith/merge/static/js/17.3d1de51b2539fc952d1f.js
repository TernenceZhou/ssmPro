webpackJsonp([17],{AOE1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),r=a.n(i),l=a("Gu7T"),o=a.n(l),n=a("K/T8"),s={columns:[{prop:"projectSouce",label:"项目来源",fixed:"left",width:"170px",filterOptions:{disabled:!0}},{prop:"projectName",label:"项目名称",fixed:"left",width:"250px",filterOptions:{disabled:!0}},{prop:"s21",label:"报告性质",fixed:"left",filterOptions:{disabled:!0},width:"100px"},{prop:"managerIdName",label:"项目负责人",fixed:"left",filterOptions:{disabled:!0},width:"100px"},{prop:"signUserName",label:" 签字合伙人",fixed:"left",filterOptions:{disabled:!0},width:"100px"},{prop:"issueReportDate2",label:"报告出具时间",width:"180px",filterOptions:{disabled:!0}},{prop:"auditState",label:"质控状态",width:"180px",filterOptions:{disabled:!0}},{prop:"fileState",label:"文印状态",width:"180px",filterOptions:{disabled:!0}},{prop:"arcState",label:"档案状态",width:"180px",filterOptions:{disabled:!0}},{prop:"isFinancialData",label:"是否导入财务数据",width:"120px",filterOptions:{disabled:!0},formatter:{type:"function",value:n.b.fmtFinancia}},{prop:"projectState",label:"项目进度",width:"105px",filterOptions:{disabled:!0},formatter:{type:"function",value:n.b.panoramaFmtEquity}},{prop:"materialityState",label:"重要性水平设置",width:"105px",filterOptions:{disabled:!0},formatter:{type:"function",value:n.b.panoramaFmtEquity}},{prop:"trialBalanceState",label:"试算平衡表",width:"115px",filterOptions:{disabled:!0},formatter:{type:"function",value:n.b.panoramaFmtEquity}},{prop:"unauditedState",label:"未审报表",width:"70px",filterOptions:{disabled:!0},formatter:{type:"function",value:n.b.panoramaFmtEquity}},{prop:"analysisReviewState",label:"初步分析性复核",width:"105px",filterOptions:{disabled:!0},formatter:{type:"function",value:n.b.panoramaFmtEquity}},{prop:"identifiedState",label:"计划控制表-科目认定表",width:"145px",filterOptions:{disabled:!0},formatter:{type:"function",value:n.b.panoramaFmtEquity}},{prop:"programPlanState",label:" 计划控制表-计划程序",width:"135px",filterOptions:{disabled:!0},formatter:{type:"function",value:n.b.panoramaFmtEquity}},{prop:"programState",label:"获取审计证据-实施程序",width:"145px",filterOptions:{disabled:!0},formatter:{type:"function",value:n.b.panoramaFmtEquity}},{prop:"clearQuestionState",label:"批注",width:"60px",filterOptions:{disabled:!0},formatter:{type:"function",value:n.b.panoramaFmtEquity}},{prop:"auditedState",label:"审定报表",width:"70px",filterOptions:{disabled:!0},formatter:{type:"function",value:n.b.panoramaFmtEquity}},{prop:"finalAnalysisReviewState",label:" 最终分析性复核",width:"110px",filterOptions:{disabled:!0},formatter:{type:"function",value:n.b.panoramaFmtEquity}},{prop:"noteinfoState",label:" 附注",width:"60px",filterOptions:{disabled:!0},formatter:{type:"function",value:n.b.panoramaFmtEquity}},{prop:"reportState",label:"报告",width:"60px",filterOptions:{disabled:!0},formatter:{type:"function",value:n.b.panoramaFmtEquity}},{prop:"bbReportState",label:"报备",width:"70px",filterOptions:{disabled:!0},formatter:{type:"function",value:function(t,e){n.b.panoramaFmtEquity(t,e)}}},{prop:"customerName",label:"客户名称",width:"170px",filterOptions:{disabled:!0}},{prop:"lastInitializationTimeDeal",label:"是否导入内部交易数据",width:"160px",flag:"a",disableToolbox:!0,filterOptions:{disabled:!0}},{prop:"lastInitializationTimeContacts",label:"是否导入内部往来数据",width:"160px"},{prop:"tbCheckFlag",label:"",show:!1}]},c=a("ABj6"),p=a("r9ye"),u=a("lCTB"),d=a("ZHXk"),f=a.n(d),m={name:"projectPanorama",components:{BdoTable:c.a,columns:s,tableType:p.a,AutoGenerationOffset:u.a},data:function(){return{percentage:0,columns:s.columns,tableData:[],bodyHeight:150,setBorder:!0,fullscreenLoading:!1,projectSouce:this.$DIC("合并报表项目来源"),editSlot:["managerIdName","signUserName","auditState","fileState","arcState","projectState","s21"],mergeProjectName:"",transactionDialogVisible:!1}},computed:{},methods:{projectPanoramaInit:function(t){var e=this;this.fullscreenLoading=!0,this.$sacpApis.getProjectPanoramaData({param1:t}).then(function(t){t.success?(t.data.forEach(function(t,e){if(t.projectProgress){var a=t.projectProgress.split("|").map(function(t,e){return"null"==t?"":t}),i=[].concat(o()(a));t.s21=i[0],t.managerIdName=i[1],t.signUserName=i[2],t.issueReportDate2=i[3],t.auditState=i[4],t.fileState=i[5],t.arcState=i[6],t.projectState=i[7]}t.isFinancialData||(t.bbReportState="",t.reportState="",t.noteinfoState="",t.finalAnalysisReviewState="",t.auditedState="",t.clearQuestionState="",t.programState="",t.programPlanState="",t.identifiedState="",t.analysisReviewState="",t.unauditedState="",t.unauditedState="",t.trialBalanceState="",t.materialityState="",t.projectState="")}),t.data.forEach(function(t){t.identifiedState&&(Number(t.identifiedState)%1==0?t.identifiedState=Number(t.identifiedState)+"%":t.identifiedState=Number(t.identifiedState).toFixed(2)+"%"),t.programPlanState&&(Number(t.programPlanState)%1==0?t.programPlanState=Number(t.programPlanState)+"%":t.programPlanState=Number(t.programPlanState).toFixed(2)+"%"),t.programState&&(Number(t.programState)%1==0?t.programState=Number(t.programState)+"%":t.programState=Number(t.programState).toFixed(2)+"%")}),e.tableData=t.data):e.$message.error(t.resultInfo.statusText)}).finally(function(){e.fullscreenLoading=!1})},save:function(){var t=this;this.$sacpApis.saveMergeProjectProgress(this.tableData).then(function(e){e.success?(t.$message.success("保存成功!"),t.projectPanoramaInit(0)):t.$message.error(e.resultInfo.statusText)})},tableColumns:function(){var t=JSON.parse(r()(this.projectSouce));t.forEach(function(t){t.text=t.label}),this.columns[0].filters=t},formatterDate:function(t,e){return e&&"0"!=e?f.a.toDateString(e,"yyyy-MM-dd HH:mm:ss"):""},handleClose:function(t){this.transactionDialogVisible=!1},queryMerchantInsideClassify:function(t){var e=this;this.transactionDialogVisible=!0,this.mergeProjectId=t.mergeProjectId,this.mergeProjectName=t.mergeProjectName,this.$sacpApis.queryMerchantInsideClassify().then(function(a){a.success?(e.tableColumns=a.data,e.$nextTick(function(){e.$refs.tableType.tabItemList(a.data,t.mergeProjectId)})):e.$message.error(a.resultInfo.statusText)}).catch(function(t){e.$message.error(t)}).finally(function(){e.fullscreenLoading=!1})},queryContactSummary:function(t){var e=this;this.$nextTick(function(){e.$refs.autoGenerationOffsetTable.queryContactSummary(t.mergeProjectId,t.shortName)})}},created:function(){this.tableColumns()}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"projectPanorama"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"更新项目全景图",placement:"top-start"}},[a("el-button",{staticClass:"refresh",attrs:{size:"mini",type:"primary",circle:"",icon:"el-icon-refresh"},on:{click:function(e){return t.projectPanoramaInit(1)}}})],1),t._v(" "),a("bdo-table",{ref:"table",attrs:{columns:t.columns,"enable-filter":!1,"enable-toolbox":!1,"enable-view-type":!1,data:t.tableData,"responsive-height-gap":t.bodyHeight,showIndexColumn:!0,showCheckBox:!1,setBorder:t.setBorder,setHeaderCellStyle:!0},scopedSlots:t._u([{key:"col-projectSouce",fn:function(e){return[a("el-select",{attrs:{disabled:!0,placeholder:"请选择项目来源"},model:{value:e.row.projectSource,callback:function(a){t.$set(e.row,"projectSource",a)},expression:"scope.row.projectSource"}},t._l(t.projectSouce,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)]}},{key:"col-issueReportDate2",fn:function(e){return[1==e.row.isTempProject?a("el-date-picker",{staticStyle:{width:"150px"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.row.issueReportDate2,callback:function(a){t.$set(e.row,"issueReportDate2",a)},expression:"scope.row.issueReportDate2"}}):t._e()]}},{key:"col-trialBalanceState",fn:function(e){var i=e.row;return[i.tbCheckFlag?t._e():a("p",{staticStyle:{color:"red"},model:{value:i.trialBalanceState,callback:function(e){t.$set(i,"trialBalanceState",e)},expression:"row.trialBalanceState"}},[t._v("\n                与SACP存在差异！\n            ")]),t._v(" "),i.tbCheckFlag&&!i.isFinancialData?a("p",{model:{value:i.trialBalanceState,callback:function(e){t.$set(i,"trialBalanceState",e)},expression:"row.trialBalanceState"}},[t._v("\n                "+t._s(i.trialBalanceState?i.trialBalanceState+"%":"___")+"\n            ")]):t._e(),t._v(" "),i.tbCheckFlag&&i.isFinancialData?a("p",{model:{value:i.trialBalanceState,callback:function(e){t.$set(i,"trialBalanceState",e)},expression:"row.trialBalanceState"}},[t._v("\n                "+t._s(i.trialBalanceState+"%")+"\n            ")]):t._e()]}},t._l(t.editSlot,function(e,i){return{key:"col-"+e,fn:function(r){return[1==r.row.isTempProject?a("el-input",{key:i,attrs:{placeholder:"请输入",clearable:"",size:"large"},model:{value:r.row[e],callback:function(a){t.$set(r.row,e,a)},expression:"scope.row[item]"}}):t._e()]}}}),{key:"col-lastInitializationTimeDeal",fn:function(e){var i=e.row;return[a("div",{staticClass:"time"},[t._v("\n                "+t._s(i.lastInitializationTimeDeal&&"0"!=i.lastInitializationTimeDeal?i.lastInitializationTimeDeal:"")+"\n            ")])]}},{key:"col-lastInitializationTimeContacts",fn:function(e){var i=e.row;return[a("div",{staticClass:"time"},[t._v("\n                "+t._s(i.lastInitializationTimeContacts&&"0"!=i.lastInitializationTimeContacts?i.lastInitializationTimeContacts:"")+"\n            ")])]}}],null,!0)}),t._v(" "),a("el-dialog",{staticClass:"internalTransaction",attrs:{width:"80%",title:"内部交易 : "+this.mergeProjectName,visible:t.transactionDialogVisible,"before-close":t.handleClose},on:{"update:visible":function(e){t.transactionDialogVisible=e}}},[a("table-type",{ref:"tableType"})],1),t._v(" "),a("auto-generation-offset",{ref:"autoGenerationOffsetTable"})],1)},staticRenderFns:[]};var S=a("VU/8")(m,b,!1,function(t){a("Ye0A")},"data-v-00ae00bc",null);e.default=S.exports},Ye0A:function(t,e){}});