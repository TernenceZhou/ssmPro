{"version":3,"sources":["webpack:///src/pages/merchantRangeSelection.vue","webpack:///./src/pages/merchantRangeSelection.vue?12a1","webpack:///./src/pages/merchantRangeSelection.vue"],"names":["vue_esm","component","VueDraggableResizable_umd_min_default","a","renderContent","value","row","index","children","attrs","merchantRangeSelection","name","data","_this","this","components","header","cell","h","props","key","restProps","objectWithoutProperties_default","col","columns","find","dataIndex","width","extends_default","concat","toConsumableArray_default","dragProps","class","w","x","z","axis","draggable","resizable","on","dragging","y","Math","max","drag","title","customRender","colSpan","scopedSlots","dataList","disabledSelect","customerInformation","sessionUtils","findUserInfo","addDataDialogVisible","subjectTree","findMerchantRangeTree","checkedKeys","expandedKeys","selectedKeys","spinning","assitemTypeTree","selectDialogVisible","assitemIsMerchantExpandedKeys","assitemIsMerchantSelectedKeys","assitemIsMerchantTree","assitemIsMerchantCheckedKeys","currentRow","checkStrictly","saveSuccess","methods","openSubjectTreeDialog","submitAddData","_this2","length","$message","warning","toTreeArray","xe_utils_default","checked","map","val","selectedTree","filter","item","subjectId","push","hideModal","onExpand","onCheck","openSelectDialog","assitemIsMerchant","params","lockCustomerId","curCustomerId","lockYyyy","curAccYear","param11","param20","queryMerchantTree","onLoadData","treeNode","_this3","promise_default","resolve","param21","dataRef","assItemId","_this4","$sacpApis","findAssitemTypeTree","then","res","success","isLeaf","parentId","_splitAssitemIsMercha","splitAssitemIsMerchantTree","id","apply","toArrayTree","sortKey","sortBy","error","resultInfo","statusText","catch","err","finally","submitAssitemIsMerchantData","hideAssitemIsMerchantModal","selectedArr","assItemName","split","join","assitemIsMerchantOnExpand","_ref","expanded","node","onChange","subjectIsMerchant","submitMerchantRangeData","_this5","some","saveMerchantRange","$store","commit","queryMerchantRangeData","deleteRow","_this6","queryMerchantRange","forEach","set","resetMerchant","_this7","manualRefesh","created","beforeCreate","simpleImage","es","PRESENTED_IMAGE_SIMPLE","pages_merchantRangeSelection","render","_vm","_h","$createElement","_c","_self","staticClass","tip","size","staticStyle","textalign","margin-bottom","margin-right","type","_v","_s","color","margin-left","cursor","click","data-source","bordered","pagination","rowKey","scroll","_u","fn","text","record","change","$event","ok-text","cancel-text","confirm","ok","cancel","model","callback","$$v","expression","checkable","expanded-keys","selected-keys","tree-data","replace-fields","expand","_e","image","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/9.f9132fff429b03b2795e.js","sourcesContent":["<template>\r\n    <a-spin\r\n        tip=\"加载中...\"\r\n        :spinning=\"spinning\"\r\n        size=\"large\"\r\n        class=\"merchant-range-spin\"\r\n    >\r\n        <div class=\"merchantRangeSelection\">\r\n            <div style=\"textalign: center; margin-bottom: 8px\">\r\n                <a-icon type=\"tag\" style=\"margin-right: 8px\" />\r\n                {{ `共查询到${dataList.length || 0}条数据` }}\r\n                <span\r\n                    style=\"color: #409eff; margin-left: 10px; cursor: pointer\"\r\n                    @click=\"manualRefesh\"\r\n                >\r\n                    <a-icon type=\"sync\" style=\"margin-right: 5px\" />刷新\r\n                </span>\r\n            </div>\r\n            <a-table\r\n                :columns=\"columns\"\r\n                :data-source=\"dataList\"\r\n                bordered\r\n                :pagination=\"false\"\r\n                :rowKey=\"(row) => row.key\"\r\n                :scroll=\"{ y: 'calc(100% - 72px)' }\"\r\n                class=\"merchant-range-table\"\r\n                :components='components'\r\n            >\r\n                <template slot=\"subjectIsMerchant\" slot-scope=\"text, record\">\r\n                    <a-checkbox\r\n                        @change=\"onChange('subjectName', record)\"\r\n                        :checked=\"record.subjectIsMerchant == '1'\"\r\n                    >\r\n                        科目\r\n                    </a-checkbox>\r\n                </template>\r\n                <template slot=\"assitemIsMerchant\" slot-scope=\"text, record\">\r\n                    <a-checkbox\r\n                        @change=\"onChange('account', record)\"\r\n                        :checked=\"record.assitemIsMerchant == '1'\"\r\n                    >\r\n                        辅助核算\r\n                    </a-checkbox>\r\n                </template>\r\n                <template slot=\"assItemName\" slot-scope=\"text, record\">\r\n                    <span\r\n                        @click=\"openSelectDialog(record)\"\r\n                        class=\"select-assItemName\"\r\n                    >\r\n                        {{ record.assItemName }}\r\n                    </span>\r\n                </template>\r\n                <template slot=\"action\" slot-scope=\"text, record\">\r\n                    <a-popconfirm\r\n                        title=\"确定要删除这条数据吗?\"\r\n                        ok-text=\"确定\"\r\n                        cancel-text=\"取消\"\r\n                        @confirm=\"deleteRow(record)\"\r\n                    >\r\n                        <a>删除</a>\r\n                    </a-popconfirm>\r\n                </template>\r\n            </a-table>\r\n            <!-- 添加对话框 -->\r\n            <a-modal\r\n                v-model=\"addDataDialogVisible\"\r\n                class=\"assSubjectDialog\"\r\n                title=\"添加科目\"\r\n                ok-text=\"确认\"\r\n                cancel-text=\"取消\"\r\n                width=\"50%\"\r\n                @ok=\"submitAddData\"\r\n                @cancel=\"hideModal\"\r\n            >\r\n                <a-tree\r\n                    v-model=\"checkedKeys\"\r\n                    checkable\r\n                    :expanded-keys=\"expandedKeys\"\r\n                    :selected-keys=\"selectedKeys\"\r\n                    :tree-data=\"subjectTree\"\r\n                    :checkStrictly=\"checkStrictly\"\r\n                    :replace-fields=\"{}\"\r\n                    @expand=\"onExpand\"\r\n                />\r\n            </a-modal>\r\n            <!-- 更改辅助核算树 -->\r\n            <a-modal\r\n                v-model=\"selectDialogVisible\"\r\n                class=\"assSubjectDialog\"\r\n                title=\"辅助核算选择\"\r\n                ok-text=\"确认\"\r\n                cancel-text=\"取消\"\r\n                width=\"50%\"\r\n                @ok=\"submitAssitemIsMerchantData\"\r\n                @cancel=\"hideAssitemIsMerchantModal\"\r\n            >\r\n                <a-tree\r\n                    v-model=\"assitemIsMerchantCheckedKeys\"\r\n                    checkable\r\n                    :tree-data=\"assitemIsMerchantTree\"\r\n                    :expanded-keys=\"assitemIsMerchantExpandedKeys\"\r\n                    :selected-keys=\"assitemIsMerchantSelectedKeys\"\r\n                    :checkStrictly=\"checkStrictly\"\r\n                    @expand=\"assitemIsMerchantOnExpand\"\r\n                />\r\n                <!--  :load-data=\"onLoadData\" -->\r\n                <a-empty\r\n                    :image=\"simpleImage\"\r\n                    v-if=\"\r\n                        !this.assitemIsMerchantTree ||\r\n                        !this.assitemIsMerchantTree.length\r\n                    \"\r\n                />\r\n            </a-modal>\r\n        </div>\r\n    </a-spin>\r\n</template>\r\n<script>\r\nimport session from '../data/session/sessionUtils';\r\nimport XEUtils from 'xe-utils';\r\nimport { Empty } from 'ant-design-vue';\r\n\r\nimport Vue from 'vue';\r\nimport VueDraggableResizable from 'vue-draggable-resizable';\r\nVue.component('vue-draggable-resizable', VueDraggableResizable);\r\n\r\nconst renderContent = (value, row, index) => {\r\n    const obj = {\r\n        children: value,\r\n        attrs: {},\r\n    };\r\n    return obj;\r\n};\r\n\r\nexport default {\r\n    name: 'merchantRangeSelection',\r\n    data() {\r\n        this.components = {\r\n            header: {\r\n                cell: (h, props, children) => {\r\n                    const { key, ...restProps } = props;\r\n                    // console.log('ResizeableTitle', key);\r\n                    const col = this.columns.find((col) => {\r\n                        const k = col.dataIndex || col.key;\r\n                        return k === key;\r\n                    });\r\n\r\n                    if (!col || !col.width) {\r\n                        return h('th', { ...restProps }, [...children]);\r\n                    }\r\n\r\n                    const dragProps = {\r\n                        key: col.dataIndex || col.key,\r\n                        class: 'table-draggable-handle',\r\n                        attrs: {\r\n                            w: 10,\r\n                            x: col.width,\r\n                            z: 1,\r\n                            axis: 'x',\r\n                            draggable: true,\r\n                            resizable: false,\r\n                        },\r\n                        on: {\r\n                            dragging: (x, y) => {\r\n                                col.width = Math.max(x, 1);\r\n                            },\r\n                        },\r\n                    };\r\n                    const drag = h('vue-draggable-resizable', { ...dragProps });\r\n                    return h('th', { ...restProps, class: 'resize-table-th' }, [\r\n                        ...children,\r\n                        drag,\r\n                    ]);\r\n                },\r\n            },\r\n        };\r\n        const columns = [\r\n            {\r\n                title: '科目',\r\n                dataIndex: 'subjectName',\r\n                width: 170,\r\n                customRender: renderContent,\r\n            },\r\n            {\r\n                title: '客商勾选',\r\n                colSpan: 2,\r\n                width: 170,\r\n                key: 'subjectIsMerchant',\r\n                scopedSlots: { customRender: 'subjectIsMerchant' },\r\n            },\r\n            {\r\n                title: '辅助核算',\r\n                colSpan: 0,\r\n                width: 200,\r\n                dataIndex: 'assitemIsMerchant',\r\n                key: 'assitemIsMerchant',\r\n                scopedSlots: { customRender: 'assitemIsMerchant' },\r\n            },\r\n            {\r\n                title: '辅助核算选择',\r\n                dataIndex: 'assItemName',\r\n                key: 'assItemName',\r\n                scopedSlots: { customRender: 'assItemName' },\r\n            },\r\n            {\r\n                title: '操作',\r\n                key: 'action',\r\n                width: 170,\r\n                scopedSlots: { customRender: 'action' },\r\n            },\r\n        ];\r\n        return {\r\n            columns,\r\n            dataList: [],\r\n            disabledSelect: false,\r\n            key: -1,\r\n            customerInformation: session.findUserInfo(),\r\n            addDataDialogVisible: false,\r\n            subjectTree: session.findMerchantRangeTree(),\r\n            checkedKeys: [],\r\n            expandedKeys: [],\r\n            selectedKeys: [],\r\n            spinning: false,\r\n            assitemTypeTree: [],\r\n            selectDialogVisible: false,\r\n            assitemIsMerchantExpandedKeys: [],\r\n            assitemIsMerchantSelectedKeys: [],\r\n            assitemIsMerchantTree: [],\r\n            assitemIsMerchantCheckedKeys: [],\r\n            currentRow: {},\r\n            checkStrictly: true,\r\n            saveSuccess: false,\r\n        };\r\n    },\r\n    methods: {\r\n        openSubjectTreeDialog() {\r\n            this.addDataDialogVisible = true;\r\n        },\r\n        submitAddData() {\r\n            //提交添加科目树按钮\r\n            if (this.checkedKeys.length == 0)\r\n                return this.$message.warning('请选择需要添加的科目');\r\n            let toTreeArray = XEUtils.toTreeArray(this.subjectTree);\r\n            let arr = [];\r\n            this.checkedKeys.checked.map((val) => {\r\n                let selectedTree = toTreeArray.filter(\r\n                    (item) => item.subjectId == val\r\n                )[0];\r\n                delete selectedTree['children'];\r\n                this.dataList.push(selectedTree);\r\n            });\r\n            this.checkedKeys = [];\r\n            this.hideModal();\r\n        },\r\n        onExpand(expandedKeys) {\r\n            this.expandedKeys = expandedKeys;\r\n        },\r\n        onCheck(checkedKeys) {\r\n            this.checkedKeys = checkedKeys;\r\n        },\r\n        hideModal() {\r\n            //关闭添加科目树对话框\r\n            this.addDataDialogVisible = false;\r\n        },\r\n        openSelectDialog(row) {\r\n            //单击辅助核算树 - 父节点\r\n            if (\r\n                !row.assitemIsMerchant ||\r\n                (row.assitemIsMerchant && row.assitemIsMerchant == '0')\r\n            )\r\n                return this.$message.warning('请先选中辅助核算!');\r\n            this.selectDialogVisible = true;\r\n            this.currentRow = row;\r\n            let params = {\r\n                lockCustomerId: this.customerInformation.curCustomerId,\r\n                lockYyyy: this.customerInformation.curAccYear,\r\n                param11: row.subjectId,\r\n                param20: 1,\r\n            };\r\n            this.queryMerchantTree(params);\r\n        },\r\n        onLoadData(treeNode) {\r\n            //子节点\r\n            return new Promise((resolve) => {\r\n                let params = {\r\n                    lockCustomerId: this.customerInformation.curCustomerId,\r\n                    lockYyyy: this.customerInformation.curAccYear,\r\n                    param11: this.currentRow.subjectId,\r\n                    param21: treeNode.dataRef.assItemId,\r\n                };\r\n                this.queryMerchantTree(params);\r\n                resolve();\r\n            });\r\n        },\r\n        queryMerchantTree(params) {\r\n            this.$sacpApis\r\n                .findAssitemTypeTree(params)\r\n                .then((res) => {\r\n                    if (res.success) {\r\n                        res.data.map((item) => {\r\n                            item.isLeaf =\r\n                                (item.parentId === '' && !item.isLeaf) ||\r\n                                !item.isLeaf\r\n                                    ? false\r\n                                    : true;\r\n                        });\r\n                        if (params.param21) {\r\n                            let splitAssitemIsMerchantTree =\r\n                                this.assitemIsMerchantTree.filter(\r\n                                    (item) => item.id === params.param21\r\n                                );\r\n                            splitAssitemIsMerchantTree.push(...res.data);\r\n                            XEUtils.toArrayTree(splitAssitemIsMerchantTree, {\r\n                                sortKey: 'id',\r\n                            }); //返回根据id排序的树结构\r\n                            splitAssitemIsMerchantTree =\r\n                                splitAssitemIsMerchantTree.filter(\r\n                                    (item) => item.parentId === ''\r\n                                ); //过滤子节点\r\n                            this.assitemIsMerchantTree =\r\n                                this.assitemIsMerchantTree.filter(\r\n                                    (item) =>\r\n                                        item.id !=\r\n                                        splitAssitemIsMerchantTree[0].id\r\n                                );\r\n\r\n                            this.assitemIsMerchantTree.push(\r\n                                splitAssitemIsMerchantTree[0]\r\n                            );\r\n                            this.assitemIsMerchantTree = XEUtils.sortBy(\r\n                                this.assitemIsMerchantTree,\r\n                                'id'\r\n                            );\r\n                        } else {\r\n                            this.assitemIsMerchantTree = res.data;\r\n                        }\r\n                    } else {\r\n                        this.$message.error(res.resultInfo.statusText);\r\n                    }\r\n                })\r\n                .catch((err) => this.$message.error(err))\r\n                .finally(() => {\r\n                    this.spinning = false;\r\n                    // this.assitemIsMerchantExpandedKeys=[];\r\n                });\r\n        },\r\n        submitAssitemIsMerchantData() {\r\n            //修改辅助核算选择\r\n            if (\r\n                this.assitemIsMerchantTree.length == 0 ||\r\n                !this.assitemIsMerchantCheckedKeys ||\r\n                this.assitemIsMerchantCheckedKeys.length == 0\r\n            )\r\n                return this.hideAssitemIsMerchantModal();\r\n            let toTreeArray = XEUtils.toTreeArray(this.assitemIsMerchantTree);\r\n            let selectedArr = [];\r\n            this.assitemIsMerchantCheckedKeys.checked.map((val) => {\r\n                selectedArr.push(\r\n                    toTreeArray.filter((item) => item.assItemId == val)[0]\r\n                );\r\n            });\r\n            let assItemId, assItemName;\r\n            selectedArr &&\r\n                selectedArr.length &&\r\n                selectedArr.map((item) => {\r\n                    if (item) {\r\n                        assItemId += `,${item.assItemId}`;\r\n                        assItemName += `,${item.assItemName}`;\r\n                    }\r\n                });\r\n            assItemId = assItemId\r\n                .split(',')\r\n                .filter((item) => item != 'undefined')\r\n                .join();\r\n            assItemName = assItemName\r\n                .split(',')\r\n                .filter((item) => item != 'undefined')\r\n                .join();\r\n            this.currentRow.assItemId = assItemId;\r\n            this.currentRow.assItemName = assItemName;\r\n            this.hideAssitemIsMerchantModal();\r\n        },\r\n        hideAssitemIsMerchantModal() {\r\n            this.selectDialogVisible = false;\r\n            this.assitemIsMerchantCheckedKeys = [];\r\n            this.assitemIsMerchantTree = [];\r\n            this.assitemIsMerchantExpandedKeys = [];\r\n        },\r\n        assitemIsMerchantOnExpand(expandedKeys, { expanded: bool, node }) {\r\n            this.assitemIsMerchantExpandedKeys = expandedKeys;\r\n            let params = {\r\n                lockCustomerId: this.customerInformation.curCustomerId,\r\n                lockYyyy: this.customerInformation.curAccYear,\r\n                param11: this.currentRow.subjectId,\r\n                param21:\r\n                    this.assitemIsMerchantExpandedKeys[\r\n                        this.assitemIsMerchantExpandedKeys.length - 1\r\n                    ],\r\n            };\r\n            if (expandedKeys && expandedKeys.length) {\r\n                this.queryMerchantTree(params);\r\n            }\r\n        },\r\n        onChange(value, row) {\r\n            //checkbox操作\r\n            this.key = row.key;\r\n            if (value == 'subjectName') {\r\n                if (!row.subjectIsMerchant || row.subjectIsMerchant == '0') {\r\n                    row.subjectIsMerchant = '1';\r\n                    // row.assitemIsMerchant=\"0\";\r\n                } else {\r\n                    row.subjectIsMerchant = '0';\r\n                    // row.assitemIsMerchant=\"1\";\r\n                }\r\n            } else {\r\n                if (!row.assitemIsMerchant || row.assitemIsMerchant == '0') {\r\n                    row.assitemIsMerchant = '1';\r\n                    // row.subjectIsMerchant=\"0\";\r\n                } else {\r\n                    row.assitemIsMerchant = '0';\r\n                    // row.subjectIsMerchant=\"1\";\r\n                }\r\n            }\r\n            //key不变的话是不会刷新的\r\n            row.key = `${row.key}+a`;\r\n        },\r\n        submitMerchantRangeData() {\r\n            //保存接口  1.客商勾选必须选一; 2.辅助核算选中,必须要有辅助核算选择\r\n            let selectMerchantFlag = this.dataList.some(\r\n                (item) =>\r\n                    item.subjectIsMerchant == '0' &&\r\n                    item.assitemIsMerchant == '0'\r\n            );\r\n            if (selectMerchantFlag)\r\n                return this.$message.error('请勾选科目或辅助核算');\r\n            let assitemIsMeerchantFlag = this.dataList.some(\r\n                (item) => item.assitemIsMerchant == '1' && !item.assItemName\r\n            );\r\n            if (assitemIsMeerchantFlag)\r\n                return this.$message.error('勾选辅助核算后必须有辅助核算选择');\r\n            this.spinning = true;\r\n            this.$sacpApis\r\n                .saveMerchantRange(this.dataList)\r\n                .then((res) => {\r\n                    if (res.success) {\r\n                        this.$store.commit('setNextStep', true);\r\n                        this.$message.success('保存成功!');\r\n                    } else {\r\n                        this.$message.error(res.resultInfo.statusText);\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    this.$message.error(err);\r\n                })\r\n                .finally(() => {\r\n                    this.spinning = false;\r\n                    this.hideAssitemIsMerchantModal();\r\n                    this.queryMerchantRangeData();\r\n                    // this.$store.commit('setSaveMerchantRange',false);\r\n                });\r\n        },\r\n        deleteRow(row) {\r\n            //删除\r\n            this.dataList = this.dataList.filter((item) => item.key != row.key);\r\n        },\r\n        queryMerchantRangeData() {\r\n            this.$sacpApis\r\n                .queryMerchantRange()\r\n                .then((res) => {\r\n                    if (res.success) {\r\n                        if (res.data && res.data.length) {\r\n                            res.data.forEach((item, index) => {\r\n                                XEUtils.set(item, 'key', index);\r\n                            });\r\n                        }\r\n                        this.dataList = res.data;\r\n                    } else {\r\n                        this.$message.error(res.resultInfo.statusText);\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    this.$message.error(err);\r\n                })\r\n                .finally(() => {\r\n                    // this.queryAddSubjectTree();\r\n                });\r\n        },\r\n        resetMerchant() {\r\n            this.spinning = true;\r\n            this.$sacpApis\r\n                .resetMerchant()\r\n                .then((res) => {\r\n                    res.success\r\n                        ? this.queryMerchantRangeData() &&\r\n                          this.$message.success('重置成功!')\r\n                        : this.$message.error(res.resultInfo.statusText);\r\n                })\r\n                .catch((err) => {\r\n                    this.$message.error(err);\r\n                })\r\n                .finally(() => {\r\n                    this.spinning = false;\r\n                });\r\n        },\r\n        manualRefesh() {\r\n            this.queryMerchantRangeData();\r\n        },\r\n    },\r\n    created() {\r\n        this.queryMerchantRangeData();\r\n    },\r\n    beforeCreate() {\r\n        this.simpleImage = Empty.PRESENTED_IMAGE_SIMPLE;\r\n    },\r\n};\r\n</script>\r\n<style>\r\n.resize-table-th {\r\n    position: relative;\r\n}\r\n.table-draggable-handle {\r\n    transform: none;\r\n    position: absolute;\r\n    height: 100% !important;\r\n    left: auto !important;\r\n    right: -5px;\r\n    cursor: col-resize;\r\n    touch-action: none;\r\n    border: none;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/merchantRangeSelection.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-spin',{staticClass:\"merchant-range-spin\",attrs:{\"tip\":\"加载中...\",\"spinning\":_vm.spinning,\"size\":\"large\"}},[_c('div',{staticClass:\"merchantRangeSelection\"},[_c('div',{staticStyle:{\"textalign\":\"center\",\"margin-bottom\":\"8px\"}},[_c('a-icon',{staticStyle:{\"margin-right\":\"8px\"},attrs:{\"type\":\"tag\"}}),_vm._v(\"\\n            \"+_vm._s((\"共查询到\" + (_vm.dataList.length || 0) + \"条数据\"))+\"\\n            \"),_c('span',{staticStyle:{\"color\":\"#409eff\",\"margin-left\":\"10px\",\"cursor\":\"pointer\"},on:{\"click\":_vm.manualRefesh}},[_c('a-icon',{staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"sync\"}}),_vm._v(\"刷新\\n            \")],1)],1),_vm._v(\" \"),_c('a-table',{staticClass:\"merchant-range-table\",attrs:{\"columns\":_vm.columns,\"data-source\":_vm.dataList,\"bordered\":\"\",\"pagination\":false,\"rowKey\":function (row) { return row.key; },\"scroll\":{ y: 'calc(100% - 72px)' },\"components\":_vm.components},scopedSlots:_vm._u([{key:\"subjectIsMerchant\",fn:function(text, record){return [_c('a-checkbox',{attrs:{\"checked\":record.subjectIsMerchant == '1'},on:{\"change\":function($event){return _vm.onChange('subjectName', record)}}},[_vm._v(\"\\n                    科目\\n                \")])]}},{key:\"assitemIsMerchant\",fn:function(text, record){return [_c('a-checkbox',{attrs:{\"checked\":record.assitemIsMerchant == '1'},on:{\"change\":function($event){return _vm.onChange('account', record)}}},[_vm._v(\"\\n                    辅助核算\\n                \")])]}},{key:\"assItemName\",fn:function(text, record){return [_c('span',{staticClass:\"select-assItemName\",on:{\"click\":function($event){return _vm.openSelectDialog(record)}}},[_vm._v(\"\\n                    \"+_vm._s(record.assItemName)+\"\\n                \")])]}},{key:\"action\",fn:function(text, record){return [_c('a-popconfirm',{attrs:{\"title\":\"确定要删除这条数据吗?\",\"ok-text\":\"确定\",\"cancel-text\":\"取消\"},on:{\"confirm\":function($event){return _vm.deleteRow(record)}}},[_c('a',[_vm._v(\"删除\")])])]}}])}),_vm._v(\" \"),_c('a-modal',{staticClass:\"assSubjectDialog\",attrs:{\"title\":\"添加科目\",\"ok-text\":\"确认\",\"cancel-text\":\"取消\",\"width\":\"50%\"},on:{\"ok\":_vm.submitAddData,\"cancel\":_vm.hideModal},model:{value:(_vm.addDataDialogVisible),callback:function ($$v) {_vm.addDataDialogVisible=$$v},expression:\"addDataDialogVisible\"}},[_c('a-tree',{attrs:{\"checkable\":\"\",\"expanded-keys\":_vm.expandedKeys,\"selected-keys\":_vm.selectedKeys,\"tree-data\":_vm.subjectTree,\"checkStrictly\":_vm.checkStrictly,\"replace-fields\":{}},on:{\"expand\":_vm.onExpand},model:{value:(_vm.checkedKeys),callback:function ($$v) {_vm.checkedKeys=$$v},expression:\"checkedKeys\"}})],1),_vm._v(\" \"),_c('a-modal',{staticClass:\"assSubjectDialog\",attrs:{\"title\":\"辅助核算选择\",\"ok-text\":\"确认\",\"cancel-text\":\"取消\",\"width\":\"50%\"},on:{\"ok\":_vm.submitAssitemIsMerchantData,\"cancel\":_vm.hideAssitemIsMerchantModal},model:{value:(_vm.selectDialogVisible),callback:function ($$v) {_vm.selectDialogVisible=$$v},expression:\"selectDialogVisible\"}},[_c('a-tree',{attrs:{\"checkable\":\"\",\"tree-data\":_vm.assitemIsMerchantTree,\"expanded-keys\":_vm.assitemIsMerchantExpandedKeys,\"selected-keys\":_vm.assitemIsMerchantSelectedKeys,\"checkStrictly\":_vm.checkStrictly},on:{\"expand\":_vm.assitemIsMerchantOnExpand},model:{value:(_vm.assitemIsMerchantCheckedKeys),callback:function ($$v) {_vm.assitemIsMerchantCheckedKeys=$$v},expression:\"assitemIsMerchantCheckedKeys\"}}),_vm._v(\" \"),(\n                    !this.assitemIsMerchantTree ||\n                    !this.assitemIsMerchantTree.length\n                )?_c('a-empty',{attrs:{\"image\":_vm.simpleImage}}):_vm._e()],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-31b1af15\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/merchantRangeSelection.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-31b1af15\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./merchantRangeSelection.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./merchantRangeSelection.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./merchantRangeSelection.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-31b1af15\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./merchantRangeSelection.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/merchantRangeSelection.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}