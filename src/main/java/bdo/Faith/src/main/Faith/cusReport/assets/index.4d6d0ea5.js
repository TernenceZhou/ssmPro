import{_ as R}from"./itemTitle.c6356fca.js";import{d as M,h as n,j as J,s as U,u as V,r as k,o as f,b as p,i as C,w as B,z as _,t as z,D as A,G as Y,n as G}from"./vendor.7005e464.js";import{e as I}from"./eventbus.38817e84.js";var b=M({components:{},props:{data1:{type:Array,default:[]}},setup(e,{attrs:T,slots:g,emit:c}){const{ctx:o,proxy:s}=J(),h=n(!0),l=n([{title:"\u4E3B\u9898",align:"left",dataIndex:"newsCategory",key:"newsCategory"},{title:"\u5F71\u54CD",align:"left",dataIndex:"newsEmotionType",key:"newsEmotionType"},{title:"\u6807\u9898",align:"left",dataIndex:"newsTitle",key:"newsTitle",width:300,ellipsis:!0,scopedSlots:{customRender:"newsTitle"}},{title:"\u6807\u7B7E",align:"left",dataIndex:"newsTags",key:"newsTags"},{title:"\u53D1\u5E03\u65F6\u95F4",align:"left",dataIndex:"newsPublishTime",key:"newsPublishTime"},{title:"\u6765\u6E90",align:"left",dataIndex:"newsSource",key:"newsSource"},{title:"\u64CD\u4F5C",dataIndex:"action",key:"action",slots:{customRender:"action"}}]),d=n([]),m=n(0),v=n({pageSize:5,defaultCurrent:1,showQuickJumper:!0,hideOnSinglePage:!1,showSizeChanger:!0,pageSizeOptions:["5","10","50","100"],total:0,showTotal:a=>`\u5171 ${a} \u6761`});return{columns:l,data:d,pagination:v,getnewsOptionsList:a=>{s.$faithApi.getNewsList(a).then(t=>{t.success&&Array.isArray(t.data)&&t.data[0].newsList?(d.value=t.data[0].newsList,m.value=t.data[0].newsList.length,h.value=!1):(s.$toast.error(t.resultInfo.statusText),d.value=[])}).catch(t=>{console.log(t)})},showChecklModal:a=>{window.open(a.newsUrl)},dataTotal:m,newsFlag:h}}});const j=A();U("data-v-c5c2fe60");const Q={key:1,class:"dataTotal"},q={key:4,class:"dataTotal"};V();const H=j((e,T)=>{const g=k("bdo-icon"),c=k("bdo-a-table");return f(),p("div",null,[e.data.length==0&&e.newsFlag?(f(),p(c,{key:0,pagination:!1,columns:e.columns,"data-source":e.data1,rowKey:(o,s)=>s},{action:j(({record:o})=>[C(g,{class:"pointer",onClick:B(s=>e.showChecklModal(o),["stop"]),src:"EyeOutlined",title:"\u67E5\u770B"},null,8,["onClick"])]),_:1},8,["columns","data-source","rowKey"])):_("",!0),e.dataTotal==0&&e.data1.length!=0&&e.newsFlag?(f(),p("div",Q,"\u5171 "+z(e.data1.length)+" \u6761",1)):_("",!0),e.data.length!=0&&e.newsFlag==!1?(f(),p(c,{key:2,pagination:!1,columns:e.columns,"data-source":e.data,rowKey:(o,s)=>s},{action:j(({record:o})=>[C(g,{class:"pointer",onClick:B(s=>e.showChecklModal(o),["stop"]),src:"EyeOutlined",title:"\u67E5\u770B"},null,8,["onClick"])]),_:1},8,["columns","data-source","rowKey"])):_("",!0),e.data.length==0&&e.newsFlag==!1?(f(),p(c,{key:3,pagination:!1,columns:e.columns,"data-source":e.data,rowKey:(o,s)=>s},null,8,["columns","data-source","rowKey"])):_("",!0),e.dataTotal!=0&&e.newsFlag==!1?(f(),p("div",q,"\u5171 "+z(e.dataTotal)+" \u6761",1)):_("",!0)])});b.render=H;b.__scopeId="data-v-c5c2fe60";var N=M({components:{itemTitle:R,newsoptionsList:b},setup(e,{attrs:T,slots:g,emit:c}){const o=n([]),s=n([]),h=n([]),u=n([]),l=n([]),d=n(null),m=n([]),v=({typeCode:S,typeName:a,checked:t,type:w})=>{if(a=="\u5168\u90E8"&&t===!0&&w===1&&(o.value.forEach(i=>{i.checked2==!0&&(i.checked2=!1)}),h.value.forEach(i=>{i.checked3==!0&&(i.checked3=!1)}),l.value=[],u.value=[]),t===!1&&w===1)return!1;let D=sessionStorage.getItem("customerId"),F=sessionStorage.getItem("projectId"),$=sessionStorage.getItem("projectYear"),K="40000077";if(t===!0&&w!==1){t===!0&&w===2&&(s.value.forEach(r=>{r.checked1==!0&&(r.checked1=!1)}),l.value.push(a)),t===!0&&w===3&&(s.value.forEach(r=>{r.checked1==!0&&(r.checked1=!1)}),u.value.push(a));let i=l.value.toString(),L=u.value.toString();const E={newsCategory:i,newsEmotionType:L};d.value.getnewsOptionsList({lockCustomerId:D,lockProjectId:F,lockYyyy:$,menuId:K,jsonData:JSON.stringify(E)})}else{if(t===!1&&w===2){let r=l.value.findIndex(O=>O==a);l.value.splice(r,1).toString()}if(t===!1&&w===3){let r=u.value.findIndex(O=>O==a);u.value.splice(r,1).toString()}let i=l.value.toString(),L=u.value.toString();const E={newsCategory:i,newsEmotionType:L};d.value.getnewsOptionsList({lockCustomerId:D,lockProjectId:F,lockYyyy:$,menuId:K,jsonData:JSON.stringify(E)})}},y=({newData:S})=>{m.value=S.value||[]};return Y(()=>{I.on("newsOptions.moreNews",y),I.on("newsOptions.handleChange",v)}),G(()=>{I.off("newsOptions.moreNews",y),I.off("newsOptions.handleChange",v)}),{newsoptionsRef:d,totalData:s,letterdata:o,orgdata:h,handleChange:v,letterList:l,orgdataList:u,moreNews:y,data1:m}}});const P=A(),W=P((e,T)=>{const g=k("newsoptions-List"),c=k("itemTitle");return f(),p("div",null,[C(c,{title:"",id:"newsoptionsList"},{content:P(()=>[C(g,{ref:"newsoptionsRef",data1:e.data1},null,8,["data1"])]),_:1})])});N.render=W;N.__scopeId="data-v-3f36930c";export{N as default};
